% script to create a random permutation of events for a behavioral task

n_events = 192;         % total events
prop_win = 0.75;        % proportion "wins" or of one type
n_consec_events = 5;    % number of consecutive events of one type

% create logical vector of events (1 = win, 0 = loss)

n_wins = floor(n_events * prop_win);
n_losses = n_events - n_wins;

win_inds = sort(randperm(n_events, n_wins));

ev_log = false(n_events, 1);
ev_log(win_inds) = true;

ev_log2 = fix_consecutive_boolean(ev_log, n_consec_events);

% convert this logical vector to an array formatted to be
% a stim sequence in the Stim2 Gentask program

stimcode_array = zeros(n_events*2, 1);
for ev=1:n_events
    stimcode
end